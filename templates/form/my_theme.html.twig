{% use 'form_div_layout.html.twig' %}


{% block form_label %}
    {% if label is not same as(false) %}
        {% if label is empty %} {# If no label is given, use a humanized version of the field name #}
            {% set label = name|humanize %}
        {% endif %}

        {% if not compound %}
            {% set label_attr = label_attr|merge({ for: id }) %}
        {% endif %}

        <label
            {% with { attr: label_attr } %}
                {{ block('attributes') }}
            {% endwith %}>
            {{ label|trans({}, translation_domain) }}
            {% if required %}
                <span>*</span>
            {% endif %}
        </label>
    {% endif %}

    {% if help is not empty %}
        <span
            class="cursor-pointer d-flex align-items-center"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            data-bs-title="{{ help|trans({}, translation_domain) }}"
            style="cursor: pointer; color: var(--bs-secondary);"
        >
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 17V11" stroke="#A8A8A7" stroke-width="1.5" stroke-linecap="round"></path>
<circle cx="1" cy="1" r="1" transform="matrix(1 0 0 -1 11 9)" fill="#A8A8A7"></circle>
<path
    d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7"
    stroke="#A8A8A7" stroke-width="1.5" stroke-linecap="round"></path>
</svg>

                </span>
    {% endif %}
{% endblock %}


{# ---- ERRORS ---- #}
{% block form_errors %}
    {% if errors|length %}
        <ul class="form-errors">
            {% for error in errors %}
                <li>{{ error.message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}


{# ---- HELP ---- #}
{% block form_help %}
    {% if help is not empty %}
        <div id="{{ id }}_help" class="form-help">
            {{ help|trans({}, translation_domain) }}
        </div>
    {% endif %}
{% endblock %}


{# Generic row for text, email, password fields, etc. #}
{% block form_row %}
    {% set fieldClass = 'my-input' %}
    {% if not form.vars.valid %}
        {% set fieldClass = fieldClass ~ ' is-invalid' %}
    {% endif %}

    {# ‚úÖ Checkbox fields (like terms) #}
    {% if 'checkbox' in form.vars.block_prefixes %}
        <div class="my-custom-row custom-checkbox-row {% if not form.vars.valid %}is-invalid{% endif %}">
            <div class="custom-checkbox">
                {{ form_widget(form) }}
                {{ form_label(form, null, { label_attr: { class: 'my-checkbox-label' } }) }}
            </div>
            {{ form_errors(form) }}
        </div>
    {% else %}
        {# ‚úÖ Normal fields (title, content, readTime, etc.) #}
        <div class="my-custom-row">
            <div class="input-wrapper">
                {{ form_widget(form, { attr: { class: fieldClass } }) }}
                {{ form_label(form, null, { label_attr: { class: 'my-label' } }) }}
                <span class="underline"></span>
            </div>
            {{ form_errors(form) }}
        </div>
    {% endif %}
{% endblock %}






{# {% block form_row_inline %} #}
{#    <div class="form-row-inline"> #}
{#        {{ form_label(form, null, { label_attr: { class: 'my-label' } }) }} #}
{#        <div class="my-input-wrapper"> #}
{#            {{ form_widget(form, { attr: { class: 'my-input' } }) }} #}
{#        </div> #}
{#        {{ form_errors(form) }} #}
{#    </div> #}
{# {% endblock %} #}




{# Textarea customization #}
{% block textarea_widget %}
    {% set attr = attr|merge({class: (attr.class|default('') ~ ' my-textarea')|trim }) %}
    <textarea {{ block('widget_attributes') }}>{{ value }}</textarea>
{% endblock %}


{# Checkbox customization #}
{# {% block checkbox_widget %} #}
{#     {% set isInvalid = not form.vars.valid %} #}
{#     <div class="custom-checkbox {% if isInvalid %}is-invalid{% endif %}"> #}
{#         <input type="checkbox" #}
{#             {{ block('widget_attributes') }} #}
{#                class="{% if isInvalid %}is-invalid{% endif %}" #}
{#             {% if value is not empty %} value="{{ value }}"{% endif %} #}
{#             {% if checked %} checked="checked"{% endif %}> #}
{#         <label for="{{ id }}" class="my-checkbox-label"> #}
{#             {{ label|default('') }} #}
{#             {% if required %}<span>*</span>{% endif %} #}
{#         </label> #}
{#     </div> #}
{#     {{ form_errors(form) }} #}
{# {% endblock %} #}




{# ---- SUBMIT BUTTON ---- #}
{% block submit_widget %}
    {% set cls = (attr.class|default('') ~ ' button-primary button-primary--halfWidth mx-auto')|trim %}
    <button type="submit" {{ block('button_attributes') }} class="{{ cls }}">
        {{ label|default('Save')|trans({}, translation_domain) }}
    </button>
{% endblock %}




{# ===========================
   üñºÔ∏è Custom Image Upload Field
   =========================== #}
{% block file_widget %}
    {# opt-in when input has class "cover-upload-input" #}
    {% set classes = (attr.class|default('')) %}
    {% set is_cover = classes != '' and 'cover-upload-input' in classes|split(' ') %}

    {% if is_cover %}
        <div class="cover-upload-wrapper">
            <label class="cover-upload-label" for="{{ id }}">
                {{ block('form_widget_simple') }}
                <div class="cover-upload-box" id="cover-preview-{{ id }}">
                    <span>
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke="#6c757d" stroke-width="1.5"
                                  stroke-linecap="round"></path>
                            <path
                                d="M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8"
                                stroke="#6c757d" stroke-width="1.5" stroke-linecap="round"></path>
                        </svg>
                    </span>
                    <span class="cover-upload-text">Add a cover image</span>
                </div>
            </label>

            {{ form_errors(form) }}
        </div>
    {% else %}
        {{ block('form_widget_simple') }}
    {% endif %}
{% endblock %}
